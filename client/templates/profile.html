<template name="profile">
	<div class="ui purple segment">
	{{#if currentUser}}
	{{#with currentUser}}
	{{> profile_currentUser}}
	{{/with}}
	{{/if}}

	<h4 class="ui horizontal divider header">
		<i class="users icon"></i>
		Buddies
	</h4>

	{{> profile_buddies}}
	</div>
</template>
<!-- ####################################################################### -->
<template name="profile_currentUser">
	<div class="ui doubling three column centered padded grid">
		<div class="column">
			{{> profile_card}}
		</div>
		{{#if isEdittingProfile}}
		<div class="column">
			<div class="ui raised segment">
			{{> profile_currentUser_edit}}
			</div>
		</div>
		{{/if}}
	</div>
</template>
<!-- ####################################################################### -->
<template name="profile_currentUser_edit">
	<form class="ui form">
		<h4 class="ui header">Your AWESOME Profile!</h4>
		<div class="required field">
			<label>Edit avatar</label>
			<div class="ui fluid selection dropdown">
				<input type="hidden" name="avatar" value="{{_getUserProfileAvatar profile}}">
				<i class="dropdown icon"></i>
				<div class="default text">Select Avatar</div>
				<div class="menu">
					{{#each AVAILABLE_AVATARS}}
					<div class="item" data-value="{{this}}">
						<img class="ui avatar image" src="{{SMALL_AVATAR_DIR}}/{{this}}.jpg" alt="avatar">
						{{this.capitalize}}
					</div>
					{{/each}}
				</div>
			</div>
		</div>

		<div class="required field">
			<label>Edit status</label>
			<div class="ui fluid input">
				<input type="text" name="status" placeholder="Enter your status" value="{{_getUserProfileStatus profile}}">
			</div>
		</div>

		<div class="ui buttons">
			<button type="button" class="ui button cancel-btn">Cancel</button>
			<div class="or"></div>
			<button class="ui positive button save-btn">Save</button>
		</div>

		<div class="ui error message"></div>
	</form>
</template>
<!-- ####################################################################### -->
<template name="profile_buddies">
	{{#if Template.subscriptionsReady}}
	<div class="ui five doubling cards">
		{{#each users}}
		{{> profile_card}}
		{{/each}}
	</div>
	{{/if}}
</template>
<!-- ####################################################################### -->
<template name="profile_card">
	<div class="ui fluid card">
		<div class="blurring dimmable image">
			<div class="ui dimmer">
				<div class="content">
					<div class="center">
						<div class="ui inverted button action-btn">{{actionLabel}}</div>
					</div>
				</div>
			</div>
			<img src="{{LARGE_AVATAR_DIR}}/{{_getUserProfileAvatar profile}}.jpg" alt="profile image">
		</div>
		<div class="content">
			<div class="header">{{username}}</div>
			<div class="meta">
				<span class="date">Joined in {{_getJoinTime createdAt}}</span>
			</div>
			<div class="description">{{profile.status}}</div>
		</div>
		{{#unless isDesktop}}
		<div class="ui bottom attached button action-btn">
			<i class="{{actionIcon}} icon"></i>
			{{actionLabel}}
		</div>
		{{/unless}}
	</div>
</template>
